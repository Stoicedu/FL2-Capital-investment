<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sort out companies' expenses! - Educational Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .game-header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .game-header h1 {
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .game-header h1 i {
            color: #667eea;
            margin-right: 15px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #718096;
            font-weight: 400;
        }

        /* Info Panel Styles */
        .info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .score-board {
            display: flex;
            gap: 30px;
        }

        .score-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .score-item i {
            color: #f6ad55;
            font-size: 1.2rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-bar {
            width: 200px;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.3s ease;
            width: 10%;
        }

        .progress-text {
            font-weight: 600;
            color: #4a5568;
        }

        /* Help Section */
        .help-section {
            margin-bottom: 30px;
        }

        .help-toggle {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(66, 153, 225, 0.3);
        }

        .help-toggle:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(66, 153, 225, 0.4);
        }

        .help-content {
            display: none;
            margin-top: 20px;
            animation: slideDown 0.3s ease;
        }

        .help-content.show {
            display: block;
        }

        .help-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .help-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .help-card.regular-expense {
            border-left: 5px solid #f56565;
        }

        .help-card.capital-investment {
            border-left: 5px solid #48bb78;
        }

        .help-card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .help-card h3 i {
            margin-right: 10px;
        }

        .help-card.regular-expense h3 i {
            color: #f56565;
        }

        .help-card.capital-investment h3 i {
            color: #48bb78;
        }

        .help-card ul {
            list-style: none;
        }

        .help-card li {
            padding: 8px 0;
            color: #718096;
            position: relative;
            padding-left: 20px;
        }

        .help-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }

        /* Game Area */
        .game-area {
            position: relative;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .company-info {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .company-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
        }

        .company-logo i {
            color: white;
            font-size: 2rem;
        }

        .company-name {
            font-size: 2rem;
            color: #4a5568;
            font-weight: 700;
        }

        .expense-scenario {
            margin-bottom: 30px;
        }

        .expense-scenario h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .scenario-text {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #718096;
            margin-bottom: 20px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 12px;
            border-left: 4px solid #4299e1;
        }

        .amount-highlight {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #f6ad55, #ed8936);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(246, 173, 85, 0.3);
        }

        .amount-highlight i {
            margin-right: 8px;
        }

        .question h3 {
            color: #4a5568;
            margin-bottom: 25px;
            font-size: 1.4rem;
            text-align: center;
        }

        .answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .answer-btn {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1.1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .answer-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .regular-btn {
            border-color: #f56565;
        }

        .regular-btn:hover {
            background: #fed7d7;
            border-color: #e53e3e;
        }

        .capital-btn {
            border-color: #48bb78;
        }

        .capital-btn:hover {
            background: #c6f6d5;
            border-color: #38a169;
        }

        .answer-btn i {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .regular-btn i {
            color: #f56565;
        }

        .capital-btn i {
            color: #48bb78;
        }

        .answer-btn span {
            font-weight: 600;
            color: #4a5568;
        }

        .answer-btn small {
            color: #a0aec0;
            font-size: 0.9rem;
        }

        /* Feedback Modal */
        .feedback-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .feedback-modal.show {
            display: flex;
        }

        .feedback-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalPop 0.4s ease;
        }

        .feedback-header {
            margin-bottom: 20px;
        }

        .feedback-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .feedback-icon.correct {
            color: #48bb78;
        }

        .feedback-icon.incorrect {
            color: #f56565;
        }

        .feedback-title {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .feedback-title.correct {
            color: #48bb78;
        }

        .feedback-title.incorrect {
            color: #f56565;
        }

        .feedback-text {
            font-size: 1.2rem;
            color: #718096;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .feedback-explanation {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: left;
        }

        .feedback-explanation h4 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .feedback-explanation p {
            color: #718096;
            line-height: 1.6;
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        /* Game Over Screen */
        .game-over {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        }

        .game-over.show {
            display: block;
        }

        .game-over-content h2 {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 30px;
        }

        .final-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .stat-item i {
            font-size: 2rem;
            color: #667eea;
        }

        .stat-item span {
            font-weight: 600;
            color: #4a5568;
        }

        .achievement {
            background: linear-gradient(135deg, #f6ad55, #ed8936);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .achievement h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .game-over-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .restart-btn, .share-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .share-btn {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
        }

        .restart-btn:hover, .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        /* Animations */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes modalPop {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .game-header h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .info-panel {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .score-board {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .help-cards {
                grid-template-columns: 1fr;
            }
            
            .answer-buttons {
                grid-template-columns: 1fr;
            }
            
            .final-stats {
                grid-template-columns: 1fr;
            }
            
            .game-over-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .question-card {
                padding: 25px;
            }
            
            .company-info {
                flex-direction: column;
                text-align: center;
            }
            
            .company-logo {
                margin-right: 0;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="game-header">
            <h1><i class="fas fa-graduation-cap"></i> Sort out companies' expenses!</h1>
            <p class="subtitle">Help companies categorize their spending! Is it a Regular Expense or Capital Investment?</p>
        </header>

        <!-- Game Info Panel -->
        <div class="info-panel">
            <div class="score-board">
                <div class="score-item">
                    <i class="fas fa-star"></i>
                    <span>Score: <span id="score">0</span></span>
                </div>
                <div class="score-item">
                    <i class="fas fa-trophy"></i>
                    <span>Level: <span id="level">1</span></span>
                </div>
                <div class="score-item">
                    <i class="fas fa-heart"></i>
                    <span>Lives: <span id="lives">3</span></span>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text">Question <span id="questionNum">1</span> of <span id="totalQuestions">10</span></span>
            </div>
        </div>

        <!-- Educational Info Toggle -->
        <div class="help-section">
            <button class="help-toggle" id="helpToggle">
                <i class="fas fa-question-circle"></i> Need Help? Click Here!
            </button>
            <div class="help-content" id="helpContent">
                <div class="help-cards">
                    <div class="help-card regular-expense">
                        <h3><i class="fas fa-receipt"></i> Regular Expenses</h3>
                        <ul>
                            <li>Used up quickly (within a year)</li>
                            <li>Examples: Office supplies, rent, marketing</li>
                            <li>Goes on Income Statement</li>
                        </ul>
                    </div>
                    <div class="help-card capital-investment">
                        <h3><i class="fas fa-building"></i> Capital Investments</h3>
                        <ul>
                            <li>Provide value for many years</li>
                            <li>Examples: Buildings, factories, equipment</li>
                            <li>Goes on Balance Sheet as Assets</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area" id="gameArea">
            <!-- Question Card -->
            <div class="question-card" id="questionCard">
                <div class="company-info">
                    <div class="company-logo" id="companyLogo">
                        <i class="fas fa-building"></i>
                    </div>
                    <h2 class="company-name" id="companyName">TechCorp Inc.</h2>
                </div>
                
                <div class="expense-scenario">
                    <h3>Company Expense Situation:</h3>
                    <p class="scenario-text" id="scenarioText">
                        TechCorp just spent $500,000 on new office chairs and desks for all employees.
                    </p>
                    <div class="amount-highlight">
                        <i class="fas fa-dollar-sign"></i>
                        <span id="expenseAmount">$500,000</span>
                    </div>
                </div>

                <div class="question">
                    <h3>What type of expense is this?</h3>
                    <div class="answer-buttons">
                        <button class="answer-btn regular-btn" onclick="selectAnswer('regular')">
                            <i class="fas fa-receipt"></i>
                            <span>Regular Expense</span>
                            <small>Used up quickly</small>
                        </button>
                        <button class="answer-btn capital-btn" onclick="selectAnswer('capital')">
                            <i class="fas fa-building"></i>
                            <span>Capital Investment</span>
                            <small>Long-term value</small>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feedback Modal -->
            <div class="feedback-modal" id="feedbackModal">
                <div class="feedback-content">
                    <div class="feedback-header" id="feedbackHeader">
                        <i class="feedback-icon" id="feedbackIcon"></i>
                        <h3 id="feedbackTitle">Correct!</h3>
                    </div>
                    <p class="feedback-text" id="feedbackText">
                        Great job! Office furniture is a capital investment because it provides value for many years.
                    </p>
                    <div class="feedback-explanation" id="feedbackExplanation">
                        <h4>Why?</h4>
                        <p id="explanationText">Office furniture like chairs and desks are used for several years and help the company operate efficiently over time.</p>
                    </div>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()">
                        Next Question <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div class="game-over" id="gameOver">
            <div class="game-over-content">
                <h2 id="gameOverTitle">üéâ Congratulations!</h2>
                <div class="final-stats">
                    <div class="stat-item">
                        <i class="fas fa-star"></i>
                        <span>Final Score: <span id="finalScore">0</span></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-target"></i>
                        <span>Accuracy: <span id="accuracy">0%</span></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-trophy"></i>
                        <span>Level Reached: <span id="finalLevel">1</span></span>
                    </div>
                </div>
                <div class="achievement" id="achievement">
                    <h3>üèÜ Achievement Unlocked!</h3>
                    <p id="achievementText">Capital Investment Expert!</p>
                </div>
                <div class="game-over-actions">
                    <button class="restart-btn" onclick="restartGame()">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                    <button class="share-btn" onclick="shareScore()">
                        <i class="fas fa-share"></i> Share Score
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        class CapitalInvestmentGame {
            constructor() {
                this.score = 0;
                this.level = 1;
                this.lives = 3;
                this.currentQuestion = 0;
                this.totalQuestions = 10;
                this.correctAnswers = 0;
                this.gameQuestions = [];
                this.isGameOver = false;
                
                // Initialize game
                this.init();
            }
            
            init() {
                this.generateQuestions();
                this.setupEventListeners();
                this.showCurrentQuestion();
                this.updateUI();
            }
            
            setupEventListeners() {
                // Help toggle
                document.getElementById('helpToggle').addEventListener('click', () => {
                    const helpContent = document.getElementById('helpContent');
                    helpContent.classList.toggle('show');
                });
            }
            
            // Generate diverse company expense scenarios
            generateQuestions() {
                const questionTemplates = [
                    // Regular Expenses
                    {
                        company: "TechStart Inc.",
                        logo: "fas fa-laptop-code",
                        scenario: "bought office supplies including paper, pens, and printer ink for the month",
                        amount: "$2,500",
                        correctAnswer: "regular",
                        explanation: "Office supplies are consumable items used up quickly within a year, making them regular expenses that go on the income statement.",
                        category: "Office Supplies"
                    },
                    {
                        company: "GreenLeaf Cafe",
                        logo: "fas fa-coffee",
                        scenario: "paid the monthly rent for their downtown location",
                        amount: "$8,000",
                        correctAnswer: "regular",
                        explanation: "Monthly rent is a recurring expense that provides no long-term asset value, making it a regular expense on the income statement.",
                        category: "Rent & Utilities"
                    },
                    {
                        company: "FitLife Gym",
                        logo: "fas fa-dumbbell",
                        scenario: "launched a social media marketing campaign to attract new members",
                        amount: "$15,000",
                        correctAnswer: "regular",
                        explanation: "Marketing campaigns are promotional expenses that are consumed quickly and don't create lasting assets, so they're regular expenses.",
                        category: "Marketing"
                    },
                    {
                        company: "BookWorld Store",
                        logo: "fas fa-book",
                        scenario: "paid employee salaries and benefits for this month",
                        amount: "$25,000",
                        correctAnswer: "regular",
                        explanation: "Employee salaries are ongoing operational costs that don't create assets, making them regular expenses on the income statement.",
                        category: "Payroll"
                    },
                    {
                        company: "QuickDelivery Co.",
                        logo: "fas fa-shipping-fast",
                        scenario: "spent money on gasoline and vehicle maintenance for their delivery trucks",
                        amount: "$5,500",
                        correctAnswer: "regular",
                        explanation: "Fuel and maintenance are operating expenses that keep the business running day-to-day but don't create long-term assets.",
                        category: "Operating Costs"
                    },
                    
                    // Capital Investments
                    {
                        company: "MegaCorp Industries",
                        logo: "fas fa-industry",
                        scenario: "built a new manufacturing factory that will operate for the next 30 years",
                        amount: "$5,000,000",
                        correctAnswer: "capital",
                        explanation: "A factory is a long-term asset that will provide value for many years, making it a capital investment recorded on the balance sheet.",
                        category: "Real Estate & Buildings"
                    },
                    {
                        company: "DataFlow Systems",
                        logo: "fas fa-server",
                        scenario: "purchased advanced computer servers that will last 8-10 years",
                        amount: "$150,000",
                        correctAnswer: "capital",
                        explanation: "Computer servers are equipment that provide value over many years, making them capital investments that become assets on the balance sheet.",
                        category: "Technology Equipment"
                    },
                    {
                        company: "SkyHigh Airlines",
                        logo: "fas fa-plane",
                        scenario: "bought a new commercial airplane for their fleet",
                        amount: "$80,000,000",
                        correctAnswer: "capital",
                        explanation: "An airplane is a major asset that will generate revenue for many years, making it a significant capital investment.",
                        category: "Transportation Assets"
                    },
                    {
                        company: "UrbanBuild Construction",
                        logo: "fas fa-hammer",
                        scenario: "purchased heavy construction equipment including cranes and bulldozers",
                        amount: "$750,000",
                        correctAnswer: "capital",
                        explanation: "Construction equipment is machinery that will be used for many years to generate revenue, making it a capital investment.",
                        category: "Machinery & Equipment"
                    },
                    {
                        company: "GlobalShop Retail",
                        logo: "fas fa-store",
                        scenario: "bought the land and building for their new flagship store",
                        amount: "$2,200,000",
                        correctAnswer: "capital",
                        explanation: "Real estate (land and buildings) are long-term assets that provide value for decades, making them capital investments.",
                        category: "Real Estate"
                    },
                    {
                        company: "EcoEnergy Corp",
                        logo: "fas fa-solar-panel",
                        scenario: "installed solar panels that will generate clean energy for 25 years",
                        amount: "$500,000",
                        correctAnswer: "capital",
                        explanation: "Solar panels are long-term equipment that will provide value over many years, making them a capital investment.",
                        category: "Green Technology"
                    },
                    {
                        company: "MedCare Hospital",
                        logo: "fas fa-hospital",
                        scenario: "purchased advanced MRI machines for patient diagnosis",
                        amount: "$1,800,000",
                        correctAnswer: "capital",
                        explanation: "Medical equipment like MRI machines are expensive assets used for many years, making them capital investments.",
                        category: "Medical Equipment"
                    },
                    
                    // Tricky scenarios to test understanding
                    {
                        company: "OfficeSpace Ltd",
                        logo: "fas fa-chair",
                        scenario: "bought high-quality office furniture that will be used for 7+ years",
                        amount: "$45,000",
                        correctAnswer: "capital",
                        explanation: "While office supplies are regular expenses, furniture is a capital investment because it provides value for many years.",
                        category: "Office Furniture"
                    },
                    {
                        company: "TechRepair Service",
                        logo: "fas fa-tools",
                        scenario: "purchased professional diagnostic tools and equipment",
                        amount: "$25,000",
                        correctAnswer: "capital",
                        explanation: "Professional tools and equipment that last multiple years are capital investments, even if the amount seems smaller.",
                        category: "Professional Tools"
                    },
                    {
                        company: "FreshMarket Grocery",
                        logo: "fas fa-shopping-cart",
                        scenario: "paid for this week's fresh produce and inventory",
                        amount: "$12,000",
                        correctAnswer: "regular",
                        explanation: "Inventory that will be sold quickly (like fresh produce) is a regular expense, not a capital investment.",
                        category: "Inventory"
                    },
                    {
                        company: "LegalEagle Law Firm",
                        logo: "fas fa-balance-scale",
                        scenario: "purchased law books and legal database subscriptions for the year",
                        amount: "$8,500",
                        correctAnswer: "regular",
                        explanation: "Books and annual subscriptions are consumed within a year, making them regular expenses even if they're educational materials.",
                        category: "Professional Services"
                    }
                ];
                
                // Shuffle and select questions for this game
                this.gameQuestions = this.shuffleArray(questionTemplates).slice(0, this.totalQuestions);
            }
            
            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            showCurrentQuestion() {
                if (this.currentQuestion >= this.gameQuestions.length) {
                    this.endGame();
                    return;
                }
                
                const question = this.gameQuestions[this.currentQuestion];
                
                // Update company info
                document.getElementById('companyName').textContent = question.company;
                document.getElementById('companyLogo').innerHTML = `<i class="${question.logo}"></i>`;
                
                // Update scenario
                document.getElementById('scenarioText').textContent = 
                    `${question.company} ${question.scenario}.`;
                document.getElementById('expenseAmount').textContent = question.amount;
                
                // Reset button states
                document.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.style.background = '';
                    btn.disabled = false;
                });
                
                this.updateUI();
            }
            
            selectAnswer(answer) {
                const question = this.gameQuestions[this.currentQuestion];
                const isCorrect = answer === question.correctAnswer;
                
                // Disable buttons to prevent multiple clicks
                document.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.disabled = true;
                });
                
                if (isCorrect) {
                    this.correctAnswers++;
                    this.score += 100 * this.level;
                    this.showFeedback(true, question);
                } else {
                    this.lives--;
                    this.showFeedback(false, question);
                    
                    if (this.lives <= 0) {
                        setTimeout(() => {
                            this.endGame();
                        }, 2000);
                        return;
                    }
                }
                
                // Check for level up (every 3 correct answers)
                if (this.correctAnswers > 0 && this.correctAnswers % 3 === 0) {
                    this.level++;
                }
                
                this.updateUI();
            }
            
            showFeedback(isCorrect, question) {
                const modal = document.getElementById('feedbackModal');
                const icon = document.getElementById('feedbackIcon');
                const title = document.getElementById('feedbackTitle');
                const text = document.getElementById('feedbackText');
                const explanation = document.getElementById('explanationText');
                
                if (isCorrect) {
                    icon.className = 'feedback-icon fas fa-check-circle correct';
                    title.textContent = 'üéâ Excellent!';
                    title.className = 'feedback-title correct';
                    text.textContent = `Great job! You correctly identified this as a ${question.correctAnswer === 'regular' ? 'regular expense' : 'capital investment'}.`;
                } else {
                    icon.className = 'feedback-icon fas fa-times-circle incorrect';
                    title.textContent = 'üìö Let\'s Learn!';
                    title.className = 'feedback-title incorrect';
                    text.textContent = `Not quite right. This is actually a ${question.correctAnswer === 'regular' ? 'regular expense' : 'capital investment'}.`;
                }
                
                explanation.textContent = question.explanation;
                
                modal.classList.add('show');
            }
            
            nextQuestion() {
                document.getElementById('feedbackModal').classList.remove('show');
                this.currentQuestion++;
                this.showCurrentQuestion();
            }
            
            updateUI() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('level').textContent = this.level;
                document.getElementById('lives').textContent = this.lives;
                document.getElementById('questionNum').textContent = this.currentQuestion + 1;
                document.getElementById('totalQuestions').textContent = this.totalQuestions;
                
                // Update progress bar
                const progress = ((this.currentQuestion + 1) / this.totalQuestions) * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;
            }
            
            endGame() {
                const gameArea = document.getElementById('gameArea');
                const gameOver = document.getElementById('gameOver');
                
                gameArea.style.display = 'none';
                gameOver.classList.add('show');
                
                // Calculate final stats
                const accuracy = Math.round((this.correctAnswers / this.totalQuestions) * 100);
                
                document.getElementById('finalScore').textContent = this.score;
                document.getElementById('accuracy').textContent = `${accuracy}%`;
                document.getElementById('finalLevel').textContent = this.level;
                
                // Show achievement based on performance
                const achievementText = this.getAchievement(accuracy);
                document.getElementById('achievementText').textContent = achievementText;
                
                this.isGameOver = true;
            }
            
            getAchievement(accuracy) {
                if (accuracy >= 90) return "Capital Investment Master! üèÜ";
                if (accuracy >= 80) return "Finance Expert! üåü";
                if (accuracy >= 70) return "Business Analyst! üìä";
                if (accuracy >= 60) return "Accounting Student! üìö";
                return "Future Finance Pro! üéØ";
            }
            
            restartGame() {
                // Reset game state
                this.score = 0;
                this.level = 1;
                this.lives = 3;
                this.currentQuestion = 0;
                this.correctAnswers = 0;
                this.isGameOver = false;
                
                // Hide game over screen
                document.getElementById('gameOver').classList.remove('show');
                document.getElementById('gameArea').style.display = 'block';
                
                // Generate new questions and restart
                this.generateQuestions();
                this.showCurrentQuestion();
                this.updateUI();
            }
            
            shareScore() {
                const accuracy = Math.round((this.correctAnswers / this.totalQuestions) * 100);
                const shareText = `I just scored ${this.score} points with ${accuracy}% accuracy in "Sort out companies' expenses!" game! üéØ Can you beat my score?`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Sort out companies\' expenses! - Educational Game',
                        text: shareText,
                        url: window.location.href
                    });
                } else {
                    // Fallback for browsers that don't support Web Share API
                    navigator.clipboard.writeText(shareText + ' ' + window.location.href).then(() => {
                        alert('Score copied to clipboard! üìã');
                    });
                }
            }
        }

        // Global functions for HTML onclick events
        let game;

        function selectAnswer(answer) {
            if (game && !game.isGameOver) {
                game.selectAnswer(answer);
            }
        }

        function nextQuestion() {
            if (game && !game.isGameOver) {
                game.nextQuestion();
            }
        }

        function restartGame() {
            if (game) {
                game.restartGame();
            }
        }

        function shareScore() {
            if (game) {
                game.shareScore();
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            game = new CapitalInvestmentGame();
        });
    </script>
</body>
</html>